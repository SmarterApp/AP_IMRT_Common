package org.opentestsystem.ap.imrt.common.service;

import org.slf4j.Logger;

/**
 * Abstract class to provide a mechanism for generating events to facilitate
 * monitoring of the ItemIngestService.
 */
public interface OperationalEventService {
    /**
     * Item related events
     */
    enum ItemEventType {
        ITEM_MONITORED, ITEM_CREATED, ITEM_UPDATED, ITEM_DELETED
    }

    /**
     * Indicates that an item is now being monitored by IIS
     *
     * @param logger    Logger belonging to the calling class
     * @param projectId Git projectId of the monitored item
     */
    void itemMonitoredEvent(Logger logger, int projectId);

    /**
     * Indicates that an item has been created in the imrt database
     *
     * @param logger    Logger belonging to the calling class
     * @param key       Database key for the newly created item
     * @param itemId    Itembank Id for the newly created item
     * @param projectId Git projectId of the newly created item
     */
    void itemCreatedEvent(Logger logger, int key, Integer itemId, int projectId);

    /**
     * Indicates that an item has been updated in the imrt database
     *
     * @param logger    Logger belonging to the calling class
     * @param key       Database key for the updated item
     * @param itemId    Itembank Id for the updated item
     * @param projectId Git projectId of the updated item
     */
    void itemUpdatedEvent(Logger logger, int key, Integer itemId, int projectId);

    /**
     * Indicates that an item has been deleted from the imrt database
     *
     * @param logger    Logger belonging to the calling class
     * @param key       Database key for the updated item
     * @param id        Itembank Id for the updated item
     * @param projectId Git projectId of the updated item
     */
    void itemDeletedEvent(Logger logger, int key, Integer id, int projectId);

    /**
     * Implementing classes should generate an appropriate event for monitoring
     * item activities.
     *
     * @param logger    Logger belonging to the calling class
     * @param type      Type of the event
     * @param key       Database key for the updated item
     * @param itemId    Itembank Id for the updated item
     * @param projectId Git projectId of the updated item
     */
    void itemEvent(Logger logger, ItemEventType type, Integer key, Integer itemId, Integer projectId);

    /**
     * Indicates a fatal error has occurred during processing
     *
     * @param logger Logger belonging to the calling class
     * @param e      Optional {@link Throwable} that caused the error, may be null
     * @param format The format string for the message. Uses the standard slf4j formatting scheme
     *               of using {} as placeholders for arguments
     * @param args   A list of arguments, corresponding to the {} placeholders in the format string.
     */
    void error(Logger logger, Throwable e, String format, Object... args);

    /**
     * Indicates an unexpected problem has occurred during processing
     *
     * @param logger Logger belonging to the calling class
     * @param e      Optional {@link Throwable} that caused the warning, may be null
     * @param format The format string for the message. Uses the standard slf4j formatting scheme
     *               of using {} as placeholders for arguments
     * @param args   A list of arguments, corresponding to the {} placeholders in the format string.
     */
    void warn(Logger logger, Throwable e, String format, Object... args);

    /**
     * Indicates an informational message that should be written to the log.
     *
     * @param logger Logger belonging to the calling class
     * @param format The format string for the message. Uses the standard slf4j formatting scheme
     *               of using {} as placeholders for arguments
     * @param args   A list of arguments, corresponding to the {} placeholders in the format string.
     */
    void info(Logger logger, String format, Object... args);

    /**
     * Indicates a debug message that should be written to the log
     *
     * @param logger the {@link Logger} to use to log the message
     * @param format The format string for the message. Uses the standard slf4j formatting scheme
     *               of using {} as placeholders for arguments
     * @param args   A list of arguments, corresponding to the {} placeholders in the format string.
     */
    void debug(Logger logger, String format, Object... args);

    /**
     * Indicates a performance message that should be written to the log
     *
     * @param logger the {@link Logger} to use to log the message
     * @param format The format string for the message. Uses the standard slf4j formatting scheme
     *               of using {} as placeholders for arguments
     * @param args   A list of arguments, corresponding to the {} placeholders in the format string.
     */
    void performannce(Logger logger, String format, Object... args);
}
