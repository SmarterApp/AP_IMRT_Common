package org.opentestsystem.ap.imrt.common.model;

import org.springframework.data.jpa.domain.support.AuditingEntityListener;

import javax.persistence.Column;
import javax.persistence.EmbeddedId;
import javax.persistence.Entity;
import javax.persistence.EntityListeners;
import javax.persistence.Table;
import java.time.Instant;

/**
 * Represents a file that can be attached to an {@link org.opentestsystem.ap.imrt.common.model.ImrtItem} or
 * {@link org.opentestsystem.ap.imrt.common.model.Stimulus}.
 */
@Entity
@Table(name = "item_attachment")
@EntityListeners(AuditingEntityListener.class)
public class Attachment extends BaseEntity {
    @EmbeddedId
    private AttachmentKey attachmentKey;

    @Column(name = "uploaded_at")
    private Instant uploadedDate;

    /**
     * Private constructor for frameworks
     */
    public Attachment() {
    }

    public Attachment(final AttachmentKey attachmentKey,
                      final Instant uploadedDate,
                      final String updatedBy) {
        this.attachmentKey = attachmentKey;
        this.uploadedDate = uploadedDate;
        setUpdatedBy(updatedBy);
    }

    /**
     * @return Unique identifier for this {@link org.opentestsystem.ap.imrt.common.model.Attachment}
     */
    public AttachmentKey getAttachmentKey() {
        return attachmentKey;
    }

    public void setAttachmentKey(final AttachmentKey attachmentKey) {
        this.attachmentKey = attachmentKey;
    }

    /**
     * @return The date and time when this {@link org.opentestsystem.ap.imrt.common.model.Attachment} was uploaded
     */
    public Instant getUploadedDate() {
        return uploadedDate;
    }

    public void setUploadedDate(final Instant uploadedDate) {
        this.uploadedDate = uploadedDate;
    }
}
