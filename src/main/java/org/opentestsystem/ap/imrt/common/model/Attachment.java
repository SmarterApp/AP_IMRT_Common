package org.opentestsystem.ap.imrt.common.model;

import org.springframework.data.jpa.domain.support.AuditingEntityListener;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EntityListeners;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import java.time.Instant;

/**
 * Represents a file that can be attached to an {@link org.opentestsystem.ap.imrt.common.model.ImrtItem} or
 * {@link org.opentestsystem.ap.imrt.common.model.Stimulus}.
 */
@Entity
@Table(name = "item_attachment")
@EntityListeners(AuditingEntityListener.class)
public class Attachment extends BaseEntity {
    @Id
    @Column
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer key;

    @ManyToOne
    private BaseItem item;

    private String fileType;
    private String fileName;

    @Column(name = "uploaded_at")
    private Instant uploadedDate;

    /**
     * Private constructor for frameworks
     */
    private Attachment() {}

    public Attachment(final BaseItem item, final String fileType, final String fileName, final Instant uploadedDate) {
        this.item = item;
        this.fileType = fileType;
        this.fileName = fileName;
        this.uploadedDate = uploadedDate;
    }

    /**
     * @return The primary key of this {@link org.opentestsystem.ap.imrt.common.model.Attachment}
     */
    public Integer getKey() {
        return key;
    }

    public void setKey(final Integer key) {
        this.key = key;
    }

    /**
     * @return The {@link org.opentestsystem.ap.imrt.common.model.BaseItem} to which this
     * {@link org.opentestsystem.ap.imrt.common.model.Attachment} is associated
     */
    public BaseItem getItem() {
        return item;
    }

    public void setItem(final ImrtItem item) {
        this.item = item;
    }

    /**
     * @return The type of {@link org.opentestsystem.ap.imrt.common.model.Attachment}
     */
    public String getFileType() {
        return fileType;
    }

    public void setFileType(final String fileType) {
        this.fileType = fileType;
    }

    /**
     * @return The file name of this {@link org.opentestsystem.ap.imrt.common.model.Attachment}
     */
    public String getFileName() {
        return fileName;
    }

    public void setFileName(final String fileName) {
        this.fileName = fileName;
    }

    /**
     * @return The date and time when this {@link org.opentestsystem.ap.imrt.common.model.Attachment} was uploaded
     */
    public Instant getUploadedDate() {
        return uploadedDate;
    }

    public void setUploadedDate(final Instant uploadedDate) {
        this.uploadedDate = uploadedDate;
    }
}
